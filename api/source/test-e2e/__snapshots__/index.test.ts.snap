// Vitest Snapshot v1

exports[`e2e test mon-entreprise api > Test evaluate brut => net + super brut 2`] = `
{
  "evaluate": [
    {
<<<<<<< HEAD
      "missingVariables": {
        "contrat salarié": 1023608.9031999998,
        "contrat salarié . activité partielle": 148070.43940000006,
        "contrat salarié . complémentaire santé . forfait": 120.0029,
        "contrat salarié . complémentaire santé . part employeur": 120.0029,
        "contrat salarié . convention collective": 23882.548399999996,
        "contrat salarié . déduction forfaitaire spécifique": 1350.2264,
        "contrat salarié . frais professionnels . abonnement transports publics . montant": 9211.009399999999,
        "contrat salarié . frais professionnels . titres-restaurant": 1651.0913999999998,
        "contrat salarié . frais professionnels . transports personnels . carburant faible émission . montant": 4350.361399999998,
        "contrat salarié . frais professionnels . transports personnels . forfait mobilités durables . montant": 2190.1453999999994,
        "contrat salarié . rémunération . avantages en nature": 1111.0914,
        "contrat salarié . rémunération . primes . activité . base": 1110.0914,
        "contrat salarié . rémunération . primes . fin d'année . treizième mois": 1110.2024,
        "contrat salarié . statut cadre": 120.01490000000001,
        "contrat salarié . temps de travail . heures supplémentaires": 73086.80240000002,
        "contrat salarié . temps de travail . temps partiel": 216328.43240000002,
        "dirigeant . gérant minoritaire": 3692084.6725000003,
        "entreprise . catégorie juridique": 70129698.59810002,
        "situation personnelle . domiciliation fiscale à l'étranger": 60.011900000000004,
        "établissement . localisation": 138.0105,
      },
      "nodeValue": 2744.60805,
      "traversedVariables": [
        "contrat salarié . rémunération . net",
        "contrat salarié . rémunération",
        "dirigeant . assimilé salarié",
        "dirigeant",
        "dirigeant . régime social",
        "entreprise . catégorie juridique . SELARL",
        "entreprise . catégorie juridique",
        "entreprise",
        "entreprise . catégorie juridique . SELAS",
        "entreprise . catégorie juridique . autre",
        "entreprise . catégorie juridique . EI . auto-entrepreneur",
        "entreprise . catégorie juridique . EI",
        "entreprise . catégorie juridique . SAS",
        "entreprise . catégorie juridique . SARL",
        "dirigeant . gérant minoritaire",
        "entreprise . catégorie juridique . SARL . unipersonnelle",
        "entreprise . catégorie juridique . SAS . unipersonnelle",
        "dirigeant . auto-entrepreneur",
        "dirigeant . indépendant",
        "contrat salarié",
        "contrat salarié . rémunération . net avec revenus de remplacement",
        "contrat salarié . rémunération . net de cotisations",
        "contrat salarié . rémunération . brut",
        "contrat salarié . rémunération . brut de base",
        "contrat salarié . rémunération . avantages en nature . montant",
        "contrat salarié . rémunération . avantages en nature",
        "contrat salarié . rémunération . primes",
        "contrat salarié . rémunération . primes . base",
        "contrat salarié . rémunération . primes . activité",
        "contrat salarié . convention collective . sport . primes",
        "contrat salarié . convention collective . sport",
        "contrat salarié . convention collective",
        "contrat salarié . rémunération . primes . activité . conventionnelles",
        "contrat salarié . rémunération . primes . activité . base",
        "contrat salarié . convention collective . optique . prime d'ancienneté",
        "contrat salarié . convention collective . optique",
        "contrat salarié . rémunération . primes . ancienneté",
        "contrat salarié . rémunération . primes . fin d'année",
        "contrat salarié . rémunération . primes . fin d'année . prime de fin d'année en mois",
        "contrat salarié . rémunération . primes . fin d'année . treizième mois",
        "contrat salarié . CDD . indemnités salarié",
        "contrat salarié . CDD",
        "contrat salarié . rémunération . heures supplémentaires",
        "contrat salarié . activité partielle",
        "contrat salarié . stage",
        "contrat salarié . temps de travail . heures supplémentaires",
        "contrat salarié . apprentissage",
        "contrat salarié . temps de travail . temps partiel",
        "contrat salarié . convention collective . compta . majoration heures supplémentaires",
        "contrat salarié . convention collective . compta",
        "contrat salarié . convention collective . HCR . majoration heures supplémentaires",
        "contrat salarié . convention collective . HCR",
        "contrat salarié . temps de travail . heures supplémentaires . majoration",
        "période . semaines par mois",
        "période",
        "contrat salarié . rémunération . heures complémentaires",
        "contrat salarié . temps de travail . heures complémentaires",
        "contrat salarié . temps de travail . heures complémentaires . majoration",
        "contrat salarié . frais professionnels",
        "contrat salarié . frais professionnels . titres-restaurant . montant . part employeur",
        "contrat salarié . frais professionnels . titres-restaurant",
        "contrat salarié . frais professionnels . abonnement transports publics . prise en charge",
        "contrat salarié . frais professionnels . abonnement transports publics . taux de prise en charge",
        "contrat salarié . frais professionnels . abonnement transports publics . taux de participation employeur",
        "contrat salarié . temps de travail . quotité de travail",
        "contrat salarié . temps de travail",
        "contrat salarié . temps de travail . temps contractuel",
        "contrat salarié . temps de travail . temps contractuel . temps hebdomadaire",
        "contrat salarié . temps de travail . base légale",
        "contrat salarié . frais professionnels . abonnement transports publics . montant",
        "contrat salarié . frais professionnels . transports personnels",
        "contrat salarié . déduction forfaitaire spécifique",
        "contrat salarié . frais professionnels . transports personnels . carburant faible émission . montant",
        "contrat salarié . frais professionnels . transports personnels . forfait mobilités durables . montant",
        "contrat salarié . convention collective . BTP . catégorie . ouvrier . prévoyance complémentaire . employeur",
        "contrat salarié . convention collective . BTP . catégorie . ouvrier",
        "contrat salarié . convention collective . BTP",
        "contrat salarié . convention collective . BTP . catégorie . etam . prévoyance complémentaire . employeur",
        "contrat salarié . convention collective . BTP . catégorie . etam",
        "contrat salarié . convention collective . BTP . catégorie . cadre . prévoyance complémentaire . employeur",
        "contrat salarié . convention collective . BTP . catégorie . cadre",
        "contrat salarié . convention collective . HCR . prévoyance conventionnelle . employeur",
        "contrat salarié . convention collective . optique . prévoyance . employeur",
        "contrat salarié . prévoyance . employeur",
        "contrat salarié . retraite supplémentaire . employeur",
        "contrat salarié . activité partielle . retrait absence",
        "contrat salarié . cotisations . salariales",
        "contrat salarié . vieillesse . salarié",
        "contrat salarié . régime des impatriés",
        "situation personnelle . domiciliation fiscale à l'étranger",
        "situation personnelle",
        "contrat salarié . vieillesse",
        "contrat salarié . vieillesse . salarié . déplafonnée",
        "contrat salarié . intermittents du spectacle . artiste . réduction de taux",
        "contrat salarié . intermittents du spectacle . artiste",
        "contrat salarié . CDD . motif",
        "contrat salarié . déduction forfaitaire spécifique . profession . journaliste . réduction de taux",
        "contrat salarié . déduction forfaitaire spécifique . profession . journaliste",
        "contrat salarié . vieillesse . salarié . déplafonnée . taux",
        "contrat salarié . cotisations . assiette forfaitaire . montant",
        "contrat salarié . intermittents du spectacle . artiste . acteur de complément . assiette forfaitaire",
        "contrat salarié . convention collective . sport . cotisations . assiette forfaitaire",
        "contrat salarié . convention collective . sport . cotisations",
        "contrat salarié . cotisations . assiette forfaitaire",
        "contrat salarié . cotisations . assiette . salariale",
        "contrat salarié . activité partielle . indemnités . conventionnelle . part soumise à cotisation",
        "contrat salarié . cotisations . assiette",
        "contrat salarié . frais professionnels . part déductible",
        "contrat salarié . frais professionnels . titres-restaurant . part déductible",
        "contrat salarié . frais professionnels . transports personnels . part déductible",
        "contrat salarié . frais professionnels . transports personnels . carburant faible émission . part déductible",
        "contrat salarié . frais professionnels . transports personnels . proportion déduction",
        "contrat salarié . frais professionnels . transports personnels . forfait mobilités durables . part déductible",
        "contrat salarié . stage . gratification minimale",
        "contrat salarié . vieillesse . salarié . plafonnée",
        "contrat salarié . vieillesse . salarié . plafonnée . taux",
        "contrat salarié . intermittents du spectacle . artiste . plafond proratisé",
        "contrat salarié . plafond sécurité sociale . renonciation proratisation",
        "contrat salarié . plafond sécurité sociale",
        "plafond sécurité sociale temps plein",
        "contrat salarié . temps de travail . quotité de travail effective",
        "contrat salarié . temps de travail . temps effectif",
        "contrat salarié . activité partielle . heures chômées",
        "contrat salarié . vieillesse . employeur",
        "contrat salarié . vieillesse . employeur . déplafonnée",
        "contrat salarié . vieillesse . employeur . déplafonnée . taux",
        "contrat salarié . vieillesse . employeur . plafonnée",
        "contrat salarié . vieillesse . employeur . plafonnée . taux",
        "contrat salarié . maladie . salarié",
        "contrat salarié . maladie . taux domiciliation fiscale étranger",
        "contrat salarié . maladie . taux salarié",
        "contrat salarié . régime alsace moselle",
        "établissement . localisation . département",
        "établissement",
        "établissement . localisation",
        "contrat salarié . retraite complémentaire . salarié",
        "contrat salarié . retraite complémentaire",
        "contrat salarié . retraite complémentaire . employeur",
        "contrat salarié . intermittents du spectacle . technicien . non cadre",
        "contrat salarié . intermittents du spectacle . technicien",
        "contrat salarié . intermittents du spectacle . artiste . non cadre",
        "contrat salarié . intermittents du spectacle . retraite complémentaire techniciens et cadre",
        "contrat salarié . retraite complémentaire . employeur . taux tranche 1",
        "contrat salarié . retraite complémentaire . employeur . taux tranche 2",
        "contrat salarié . retraite complémentaire . salarié . taux tranche 1",
        "contrat salarié . retraite complémentaire . salarié . taux tranche 2",
        "contrat salarié . contribution d'équilibre général . salarié",
        "contrat salarié . contribution d'équilibre général",
        "contrat salarié . contribution d'équilibre général . employeur",
        "contrat salarié . contribution d'équilibre général . employeur . taux tranche 1",
        "contrat salarié . contribution d'équilibre technique . salarié",
        "contrat salarié . chômage . salarié",
        "contrat salarié . chômage",
        "contrat salarié . chômage . salarié . taux",
        "contrat salarié . chômage . employeur",
        "contrat salarié . chômage . employeur . taux",
        "contrat salarié . CSG et CRDS",
        "contrat salarié . CSG et CRDS . CSG",
        "contrat salarié . CSG et CRDS . CSG . déductible",
        "contrat salarié . CSG et CRDS . CSG . déductible . taux",
        "contrat salarié . CSG et CRDS . assiette de base",
        "contrat salarié . CSG et CRDS . assiette abattue totale",
        "contrat salarié . convention collective . sport . cotisations . prévoyance",
        "contrat salarié . avantages sociaux",
        "contrat salarié . prévoyance obligatoire cadre",
        "contrat salarié . statut cadre",
        "contrat salarié . complémentaire santé . employeur",
        "contrat salarié . complémentaire santé",
        "contrat salarié . complémentaire santé . part employeur",
        "contrat salarié . convention collective . sport . cotisations . régime frais de santé",
        "contrat salarié . complémentaire santé . forfait",
        "contrat salarié . complémentaire santé . salarié",
        "contrat salarié . complémentaire santé . part salarié",
        "contrat salarié . CSG et CRDS . assiette heures supplémentaires et complémentaires défiscalisées",
        "contrat salarié . rémunération . net imposable . heures supplémentaires et complémentaires défiscalisées",
        "contrat salarié . CSG et CRDS . CSG . non déductible",
        "contrat salarié . CSG et CRDS . CSG . non déductible . taux",
        "contrat salarié . CSG et CRDS . CSG . non déductible . heures supplémentaires et complémentaires défiscalisées",
        "contrat salarié . CSG et CRDS . CRDS",
        "contrat salarié . CSG et CRDS . CRDS . taux",
        "contrat salarié . APEC . salarié",
        "contrat salarié . APEC",
        "contrat salarié . cotisations . salariales . conventionnelles",
        "contrat salarié . cotisations . salariales . réductions de cotisations",
        "contrat salarié . cotisations . salariales . réduction heures supplémentaires",
        "contrat salarié . rémunération . revenus de remplacement",
        "contrat salarié . activité partielle . indemnités",
        "contrat salarié . CSG et CRDS . revenus de remplacement",
        "contrat salarié . CSG et CRDS . revenus de remplacement . CSG déductible",
        "contrat salarié . CSG et CRDS . revenus de remplacement . CSG déductible . plafond",
        "SMIC temps plein",
        "SMIC horaire",
        "date",
        "contrat salarié . CSG et CRDS . assiette revenu remplacements",
        "contrat salarié . CSG et CRDS . revenus de remplacement . CSG non déductible",
        "contrat salarié . CSG et CRDS . revenus de remplacement . CSG non déductible . plafond",
        "contrat salarié . CSG et CRDS . revenus de remplacement . CRDS",
        "contrat salarié . cotisations . maladie sur les revenus de remplacement",
        "contrat salarié . frais professionnels . titres-restaurant . montant",
      ],
      "unit": {
        "denominators": [
          "mois",
        ],
        "numerators": [
          "€",
        ],
=======
      "error": {
        "message": "
[ Erreur syntaxique ]
➡️  Dans la règle \\"$EVALUATION\\"
✖️  La référence \\"salarié . rémunération . net à payer avant impôt\\" est introuvable.
Vérifiez que l'orthographe et l'espace de nom sont corrects
    
",
>>>>>>> 688a6e07a (Réorganise la base de règle salariés)
      },
    },
    {
      "missingVariables": {
<<<<<<< HEAD
        "contrat salarié": 1339031.3106999998,
        "contrat salarié . ATMP": 572.0358999999999,
        "contrat salarié . ATMP . taux collectif ATMP": 104.00469999999999,
        "contrat salarié . ATMP . taux connu": 208.0255,
        "contrat salarié . ATMP . taux réduit": 104.01509999999999,
        "contrat salarié . activité partielle": 192768.0473,
        "contrat salarié . aides employeur . emploi franc . éligible": 2.0007,
        "contrat salarié . allocations familiales . taux réduit": 52.0099,
        "contrat salarié . complémentaire santé . forfait": 4.000299999999999,
        "contrat salarié . complémentaire santé . part employeur": 4.000299999999999,
        "contrat salarié . convention collective": 28371.036899999992,
        "contrat salarié . déduction forfaitaire spécifique": 2128.3397000000004,
        "contrat salarié . frais professionnels . abonnement transports publics . montant": 12245.349299999998,
        "contrat salarié . frais professionnels . titres-restaurant": 2164.1252999999997,
        "contrat salarié . frais professionnels . transports personnels . carburant faible émission . montant": 5764.485299999999,
        "contrat salarié . frais professionnels . transports personnels . forfait mobilités durables . montant": 2884.1973,
        "contrat salarié . lodeom": 56.018299999999996,
        "contrat salarié . rémunération . avantages en nature": 1444.1253,
        "contrat salarié . rémunération . primes . activité . base": 1444.1253,
        "contrat salarié . rémunération . primes . fin d'année . treizième mois": 1444.2697000000005,
        "contrat salarié . statut JEI": 396.0711000000001,
        "contrat salarié . statut cadre": 8.001100000000001,
        "contrat salarié . temps de travail . heures supplémentaires": 95424.92689999999,
        "contrat salarié . temps de travail . temps partiel": 283389.26210000005,
        "dirigeant . gérant minoritaire": 4826914.609700001,
        "entreprise . association non lucrative": 6.001100000000001,
        "entreprise . catégorie juridique": 91685347.2657,
        "entreprise . effectif . seuil": 384.07310000000007,
        "entreprise . exonérée de TVA": 2.0004999999999997,
        "établissement . localisation": 424.0511,
=======
        "dirigeant . gérant minoritaire": 164025.59269999998,
        "entreprise . TVA": 2.0003,
        "entreprise . association non lucrative": 4.0007,
        "entreprise . catégorie juridique": 3115518.740699998,
        "entreprise . salariés . effectif . seuil": 184.03310000000002,
        "salarié . activité partielle": 12149.2733,
        "salarié . coût total employeur . aides . emploi franc . éligible": 2.0007,
        "salarié . contrat": 85263.32030000002,
        "salarié . contrat . statut cadre": 216.05949999999999,
        "salarié . contrat . temps de travail . temps partiel": 15382.646500000003,
        "salarié . convention collective": 22982.644500000002,
        "salarié . cotisations . ATMP . taux collectif": 4.000299999999999,
        "salarié . cotisations . ATMP . taux connu": 8.001100000000001,
        "salarié . cotisations . ATMP . taux réduit": 4.0007,
        "salarié . cotisations . exonérations . JEI": 196.0415,
        "salarié . cotisations . exonérations . lodeom": 24.0087,
        "salarié . cotisations . prévoyances . santé . montant": 212.03789999999998,
        "salarié . cotisations . prévoyances . santé . taux employeur": 212.03789999999998,
        "salarié . régimes spécifiques . DFS": 432.0618999999999,
        "salarié . rémunération . avantages en nature": 2268.2901,
        "salarié . rémunération . frais professionnels . titres-restaurant": 2684.2901,
        "salarié . rémunération . frais professionnels . trajets domicile travail . forfait mobilités durables . montant": 6200.6417,
        "salarié . rémunération . frais professionnels . trajets domicile travail . prime de transport . montant": 6200.8081,
        "salarié . rémunération . frais professionnels . trajets domicile travail . transports publics . montant": 14066.297700000003,
        "salarié . rémunération . primes . activité . base": 2268.2901,
        "salarié . rémunération . primes . fin d'année": 2268.2901,
        "salarié . temps de travail . heures supplémentaires": 4852.3033000000005,
        "établissement . localisation": 244.0363,
>>>>>>> 688a6e07a (Réorganise la base de règle salariés)
      },
      "nodeValue": 4752.1452,
      "traversedVariables": [
        "salarié . coût total employeur",
        "salarié . rémunération . brut",
        "salarié . contrat . salaire brut",
        "salarié . rémunération . avantages en nature . montant",
        "salarié . rémunération . avantages en nature",
        "dirigeant . assimilé salarié",
        "dirigeant",
        "dirigeant . régime social",
        "entreprise . catégorie juridique . SELARL",
        "entreprise . catégorie juridique",
        "entreprise . catégorie juridique . SELAS",
        "entreprise . catégorie juridique . autre",
        "entreprise . catégorie juridique . EI . auto-entrepreneur",
        "entreprise . catégorie juridique . EI",
        "entreprise . catégorie juridique . SAS",
        "entreprise . catégorie juridique . SARL",
        "dirigeant . gérant minoritaire",
        "entreprise . catégorie juridique . SARL . unipersonnelle",
        "entreprise . catégorie juridique . SAS . unipersonnelle",
        "salarié . rémunération . primes",
        "salarié . rémunération . primes . activité",
        "salarié . rémunération . primes . activité . base",
        "salarié . convention collective . sport . primes",
        "salarié . convention collective . sport",
        "salarié . convention collective",
        "salarié . rémunération . primes . activité . conventionnelles",
        "salarié . convention collective . optique . prime d'ancienneté",
        "salarié . convention collective . optique",
        "salarié . rémunération . primes . ancienneté",
        "salarié . rémunération . primes . fin d'année . montant",
        "salarié . rémunération . primes . fin d'année",
        "salarié . rémunération . indemnités CDD",
        "salarié . contrat . CDD",
        "salarié . contrat",
        "salarié . rémunération . heures supplémentaires",
        "salarié . activité partielle",
        "salarié . contrat . stage",
        "salarié . temps de travail . heures supplémentaires",
        "salarié . contrat . apprentissage",
        "salarié . contrat . temps de travail . temps partiel",
        "période . semaines par mois",
        "période",
        "salarié . temps de travail . durée légale",
        "salarié . convention collective . compta . majoration heures supplémentaires",
        "salarié . convention collective . compta",
        "salarié . convention collective . HCR . majoration heures supplémentaires",
        "salarié . convention collective . HCR",
        "salarié . temps de travail . heures supplémentaires . majoration",
        "salarié . rémunération . heures complémentaires",
        "salarié . temps de travail . heures complémentaires",
        "salarié . temps de travail . heures complémentaires . majoration",
        "salarié . rémunération . frais professionnels",
        "salarié . rémunération . frais professionnels . titres-restaurant . employeur",
        "salarié . rémunération . frais professionnels . titres-restaurant",
        "salarié . rémunération . frais professionnels . trajets domicile travail . employeur",
        "salarié . rémunération . frais professionnels . trajets domicile travail . transports publics . employeur",
        "salarié . rémunération . frais professionnels . trajets domicile travail . transports publics . montant",
        "salarié . rémunération . frais professionnels . trajets domicile travail . forfait mobilités durables . montant",
        "salarié . régimes spécifiques . DFS",
        "salarié . rémunération . frais professionnels . trajets domicile travail . prime de transport . montant",
        "salarié . contrat . temps de travail . quotité",
        "salarié . contrat . temps de travail",
        "salarié . temps de travail . durée légale . mensuelle",
        "salarié . activité partielle . retrait absence",
        "salarié . convention collective . BTP . cotisations employeur",
        "salarié . convention collective . BTP",
        "salarié . convention collective . SVP . cotisations employeur",
        "salarié . convention collective . SVP",
        "salarié . convention collective . sport . cotisations . employeur",
        "salarié . convention collective . sport . cotisations",
        "salarié . cotisations . employeur",
        "salarié . cotisations . maladie . employeur",
        "salarié . régimes spécifiques . intermittents du spectacle . artiste . réduction de taux",
        "salarié . régimes spécifiques . intermittents du spectacle . artiste",
        "salarié . contrat . CDD . motif",
        "salarié . cotisations . maladie . employeur . taux",
        "salarié . cotisations . exonérations . JEI",
        "salarié . cotisations . exonérations",
        "salarié . cotisations . exonérations . employeur",
        "salarié . cotisations . exonérations . heures supplémentaires . employeur",
        "entreprise . salariés . effectif",
        "entreprise . salariés . effectif . seuil",
        "salarié . cotisations . assiette forfaitaire . rémunération réelle",
        "salarié . régimes spécifiques . intermittents du spectacle . artiste . acteur de complément . assiette forfaitaire",
        "salarié . convention collective . sport . cotisations . assiette forfaitaire",
        "salarié . cotisations . assiette forfaitaire",
        "plafond sécurité sociale",
        "salarié . cotisations . exonérations . lodeom",
        "salarié . cotisations . exonérations . lodeom . zone un",
        "établissement . localisation . département",
        "établissement . localisation",
        "salarié . cotisations . exonérations . lodeom . montant",
        "salarié . cotisations . exonérations . réduction générale",
        "salarié . cotisations . maladie . employeur . taux réduit",
        "salarié . cotisations . assiette",
        "salarié . cotisations . assiette . sans prévoyance",
        "salarié . rémunération . frais professionnels . déductible",
        "salarié . rémunération . frais professionnels . titres-restaurant . déductible",
        "salarié . rémunération . frais professionnels . trajets domicile travail . déductible",
        "salarié . rémunération . frais professionnels . trajets domicile travail . prime de transport . déductible",
        "salarié . contrat . stage . gratification minimale",
        "salarié . cotisations . prévoyances . employeur . non déductible socialement",
        "salarié . cotisations . prévoyances . employeur",
        "salarié . cotisations . prévoyances . santé . employeur",
        "salarié . cotisations . prévoyances . santé",
        "salarié . convention collective . sport . cotisations . régime frais de santé",
        "salarié . cotisations . prévoyances . santé . montant",
        "salarié . cotisations . prévoyances . santé . taux employeur",
        "salarié . convention collective . BTP . catégorie . ouvrier . prévoyance complémentaire . employeur",
        "salarié . convention collective . BTP . catégorie . ouvrier",
        "salarié . convention collective . BTP . catégorie . etam . prévoyance complémentaire . employeur",
        "salarié . convention collective . BTP . catégorie . etam",
        "salarié . convention collective . BTP . catégorie . cadre . prévoyance complémentaire . employeur",
        "salarié . convention collective . BTP . catégorie . cadre",
        "salarié . convention collective . HCR . prévoyance conventionnelle . employeur",
        "salarié . convention collective . optique . prévoyance . employeur",
        "salarié . convention collective . sport . cotisations . prévoyance . employeur",
        "salarié . cotisations . prévoyances . conventionnelle . employeur",
        "salarié . contrat . statut cadre",
        "salarié . temps de travail . SMIC",
        "salarié . temps de travail",
        "SMIC . horaire",
        "date",
        "salarié . régimes spécifiques . DFS . profession . journaliste . réduction de taux",
        "salarié . régimes spécifiques . DFS . profession . journaliste",
        "salarié . cotisations . allocations familiales . taux",
        "salarié . cotisations . allocations familiales . taux réduit",
        "salarié . cotisations . vieillesse . employeur . déplafonnée . taux",
        "salarié . régimes spécifiques . impatriés",
        "situation personnelle . domiciliation fiscale à l'étranger",
        "salarié . cotisations . vieillesse",
        "salarié . cotisations . vieillesse . salarié",
        "salarié . cotisations . vieillesse . salarié . déplafonnée",
        "salarié . cotisations . vieillesse . salarié . déplafonnée . taux",
        "salarié . cotisations . assiette . salariale",
        "salarié . cotisations . vieillesse . salarié . plafonnée",
        "salarié . cotisations . vieillesse . salarié . plafonnée . taux",
        "salarié . temps de travail . plafond sécurité sociale",
        "salarié . temps de travail . effectif . quotité",
        "salarié . temps de travail . effectif",
        "salarié . activité partielle . heures chômées",
        "salarié . cotisations . vieillesse . employeur",
        "salarié . cotisations . vieillesse . employeur . déplafonnée",
        "salarié . cotisations . vieillesse . employeur . plafonnée",
        "salarié . cotisations . vieillesse . employeur . plafonnée . taux",
        "salarié . cotisations . CSA . taux",
        "salarié . cotisations . ATMP . taux minimum",
        "salarié . convention collective . sport . exonération cotisation AT",
        "salarié . cotisations . ATMP",
        "salarié . régimes spécifiques . intermittents du spectacle . artiste . réduction de taux . ATMP",
        "salarié . cotisations . ATMP . taux",
        "salarié . cotisations . ATMP . taux connu",
        "salarié . cotisations . ATMP . taux réduit",
        "salarié . cotisations . ATMP . taux collectif",
        "salarié . cotisations . ATMP . taux moyen",
        "salarié . cotisations . FNAL . taux",
        "salarié . cotisations . FNAL . éligible taux réduit",
        "salarié . cotisations . chômage . employeur . taux",
        "salarié . cotisations . chômage",
        "salarié . cotisations . chômage . salarié",
        "salarié . cotisations . chômage . salarié . taux",
        "salarié . cotisations . chômage . employeur",
        "salarié . régimes spécifiques . intermittents du spectacle . retraite complémentaire techniciens et cadre",
        "salarié . régimes spécifiques . intermittents du spectacle . artiste . non cadre",
        "salarié . cotisations . retraite complémentaire . employeur . taux T1",
        "salarié . cotisations . retraite complémentaire",
        "salarié . cotisations . retraite complémentaire . employeur",
        "salarié . régimes spécifiques . intermittents du spectacle . technicien . non cadre",
        "salarié . régimes spécifiques . intermittents du spectacle . technicien",
        "salarié . cotisations . retraite complémentaire . employeur . taux T2",
        "salarié . cotisations . retraite complémentaire . salarié",
        "salarié . cotisations . retraite complémentaire . salarié . taux T1",
        "salarié . cotisations . retraite complémentaire . salarié . taux T2",
        "salarié . cotisations . CEG . employeur . taux T1",
        "salarié . cotisations . CEG",
        "salarié . cotisations . CEG . employeur",
        "salarié . cotisations . CEG . salarié",
        "salarié . cotisations . exonérations . JEI . montant",
        "salarié . cotisations . exonérations . salarié",
        "salarié . cotisations . exonérations . heures supplémentaires . salarié",
        "salarié . cotisations . exonérations . heures supplémentaires . salarié . taux des cotisations réduites",
        "salarié . cotisations . CSA",
        "salarié . cotisations . CET . employeur",
        "salarié . cotisations . CET . employeur . taux",
        "salarié . cotisations . allocations familiales",
        "salarié . cotisations . APEC . employeur",
        "salarié . cotisations . APEC",
        "salarié . cotisations . AGS",
        "salarié . cotisations . FNAL",
        "salarié . cotisations . PEEC",
        "salarié . cotisations . contribution au dialogue social",
        "salarié . convention collective . sport . cotisations . formation professionnelle",
        "salarié . cotisations . formation professionnelle",
        "salarié . cotisations . versement mobilité",
        "entreprise . association non lucrative",
        "salarié . cotisations . taxe d'apprentissage",
        "salarié . régimes spécifiques . alsace moselle",
        "salarié . cotisations . CPF CDD",
        "salarié . cotisations . forfait social",
        "salarié . activité partielle . indemnités",
        "salarié . régimes spécifiques . taxe sur les salaires",
        "entreprise . TVA",
        "salarié . coût total employeur . aides",
        "salarié . coût total employeur . aides . aides à l'embauche",
        "salarié . coût total employeur . aides . emploi franc . éligible",
        "salarié . contrat . CDI",
        "salarié . contrat . professionnalisation . salarié de 45 ans et plus",
        "salarié . contrat . professionnalisation",
        "salarié . activité partielle . indemnisation entreprise",
      ],
      "unit": {
        "denominators": [
          "mois",
        ],
        "numerators": [
          "€",
        ],
      },
    },
  ],
}
`;

exports[`e2e test mon-entreprise api > Test evaluate micro entreprise 2`] = `
{
  "evaluate": [
    {
      "missingVariables": {
        "entreprise . activité . mixte": 24.0042,
      },
      "nodeValue": 9324,
      "traversedVariables": [
        "dirigeant . auto-entrepreneur . cotisations et contributions",
        "dirigeant",
        "dirigeant . régime social",
        "entreprise . catégorie juridique . SELARL",
        "entreprise . catégorie juridique",
        "entreprise . catégorie juridique . SELAS",
        "entreprise . catégorie juridique . autre",
        "entreprise . catégorie juridique . EI . auto-entrepreneur",
        "entreprise . catégorie juridique . EI",
        "dirigeant . auto-entrepreneur",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations",
        "déclaration charge sociales",
        "entreprise . exonérations . ACRE",
        "entreprise . durée d'activité",
        "entreprise . date de création",
        "entreprise . durée d'activité . en début d'année",
        "période . début d'année",
        "période",
        "date",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations . taux prestation de service",
        "entreprise . activité . libérale . réglementée",
        "déclaration charge sociales . nature de l'activité",
        "entreprise . activité . libérale",
        "entreprise . activité",
        "entreprise . chiffre d'affaires . service",
        "entreprise . chiffre d'affaires . service BIC",
        "dirigeant . indépendant . PL",
        "entreprise . activité . mixte",
        "entreprise . imposition . régime . micro-entreprise",
        "entreprise . imposition . IS",
        "DRI . accompagnement imposition . régime memento fiscal . RSI",
        "DRI",
        "DRI . accompagnement imposition . régime memento fiscal . RN",
        "DRI . accompagnement imposition . régime memento fiscal . DECC",
        "DRI . accompagnement imposition . régime memento fiscal . SPECIAL",
        "DRI . accompagnement imposition . régime memento fiscal . MICROE",
        "entreprise . activité . service ou vente",
        "entreprise . chiffre d'affaires . service BNC",
        "dirigeant . auto-entrepreneur . chiffre d'affaires",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations . taux vente restauration hébergement",
        "entreprise . chiffre d'affaires . vente restauration hébergement",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC . commerce",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC . métiers",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP . revenus BIC",
        "entreprise . chiffre d'affaires . BIC",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP . revenus BNC",
      ],
      "unit": {
        "denominators": [
          "an",
        ],
        "numerators": [
          "€",
        ],
      },
    },
    {
      "missingVariables": {
        "entreprise . activité . mixte": 100.0178,
        "établissement . localisation": 7.0005,
      },
      "nodeValue": 1469,
      "traversedVariables": [
        "dirigeant . rémunération . impôt",
        "dirigeant . rémunération",
        "dirigeant",
        "impôt . taux d'imposition",
        "impôt . méthode de calcul . taux neutre",
        "dirigeant . auto-entrepreneur . impôt . versement libératoire",
        "dirigeant . auto-entrepreneur . impôt",
        "dirigeant . auto-entrepreneur",
        "impôt . méthode de calcul",
        "impôt . taux neutre d'impôt sur le revenu . barème Guadeloupe Réunion Martinique",
        "impôt . taux neutre d'impôt sur le revenu . barème Guyane Mayotte",
        "établissement . localisation . outre-mer . Guadeloupe Réunion Martinique",
        "établissement . localisation . département",
        "établissement . localisation",
        "impôt . taux neutre d'impôt sur le revenu",
        "date",
        "impôt . revenu imposable",
        "dirigeant . rémunération . net . imposable",
        "dirigeant . assimilé salarié",
        "dirigeant . régime social",
        "entreprise . catégorie juridique . SELARL",
        "entreprise . catégorie juridique",
        "entreprise . catégorie juridique . SELAS",
        "entreprise . catégorie juridique . autre",
        "entreprise . catégorie juridique . EI . auto-entrepreneur",
        "entreprise . catégorie juridique . EI",
        "dirigeant . indépendant",
        "dirigeant . auto-entrepreneur . impôt . revenu imposable",
        "entreprise . imposition . régime . micro-entreprise",
        "entreprise . imposition . IS",
        "DRI . accompagnement imposition . régime memento fiscal . RSI",
        "DRI",
        "DRI . accompagnement imposition . régime memento fiscal . RN",
        "DRI . accompagnement imposition . régime memento fiscal . DECC",
        "DRI . accompagnement imposition . régime memento fiscal . SPECIAL",
        "DRI . accompagnement imposition . régime memento fiscal . MICROE",
        "entreprise . chiffre d'affaires . vente restauration hébergement",
        "entreprise . activité . service ou vente",
        "entreprise . chiffre d'affaires . service BIC",
        "déclaration charge sociales",
        "dirigeant . indépendant . PL",
        "entreprise . activité . mixte",
        "entreprise . chiffre d'affaires . service BNC",
        "dirigeant . auto-entrepreneur . chiffre d'affaires",
        "bénéficiaire . dividendes . imposables",
        "dirigeant . auto-entrepreneur . impôt . versement libératoire . montant",
      ],
      "unit": {
        "denominators": [
          "an",
        ],
        "numerators": [
          "€",
        ],
      },
    },
    {
      "missingVariables": {
        "entreprise . activité . mixte": 124.02199999999999,
        "établissement . localisation": 7.0005,
      },
      "nodeValue": 31207,
      "traversedVariables": [
        "dirigeant . auto-entrepreneur . revenu net . après impôt",
        "dirigeant . auto-entrepreneur",
        "dirigeant . auto-entrepreneur . revenu net",
        "dirigeant . auto-entrepreneur . cotisations et contributions",
        "dirigeant",
        "dirigeant . régime social",
        "entreprise . catégorie juridique . SELARL",
        "entreprise . catégorie juridique",
        "entreprise . catégorie juridique . SELAS",
        "entreprise . catégorie juridique . autre",
        "entreprise . catégorie juridique . EI . auto-entrepreneur",
        "entreprise . catégorie juridique . EI",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations",
        "déclaration charge sociales",
        "entreprise . exonérations . ACRE",
        "entreprise . durée d'activité",
        "entreprise . date de création",
        "entreprise . durée d'activité . en début d'année",
        "période . début d'année",
        "période",
        "date",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations . taux prestation de service",
        "entreprise . activité . libérale . réglementée",
        "déclaration charge sociales . nature de l'activité",
        "entreprise . activité . libérale",
        "entreprise . activité",
        "entreprise . chiffre d'affaires . service",
        "entreprise . chiffre d'affaires . service BIC",
        "dirigeant . indépendant . PL",
        "entreprise . activité . mixte",
        "entreprise . imposition . régime . micro-entreprise",
        "entreprise . imposition . IS",
        "DRI . accompagnement imposition . régime memento fiscal . RSI",
        "DRI",
        "DRI . accompagnement imposition . régime memento fiscal . RN",
        "DRI . accompagnement imposition . régime memento fiscal . DECC",
        "DRI . accompagnement imposition . régime memento fiscal . SPECIAL",
        "DRI . accompagnement imposition . régime memento fiscal . MICROE",
        "entreprise . activité . service ou vente",
        "entreprise . chiffre d'affaires . service BNC",
        "dirigeant . auto-entrepreneur . chiffre d'affaires",
        "dirigeant . auto-entrepreneur . cotisations et contributions . cotisations . taux vente restauration hébergement",
        "entreprise . chiffre d'affaires . vente restauration hébergement",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC . commerce",
        "dirigeant . auto-entrepreneur . cotisations et contributions . TFC . métiers",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP . revenus BIC",
        "entreprise . chiffre d'affaires . BIC",
        "dirigeant . auto-entrepreneur . cotisations et contributions . CFP . revenus BNC",
        "dirigeant . rémunération . impôt",
        "dirigeant . rémunération",
        "impôt . taux d'imposition",
        "impôt . méthode de calcul . taux neutre",
        "dirigeant . auto-entrepreneur . impôt . versement libératoire",
        "dirigeant . auto-entrepreneur . impôt",
        "impôt . méthode de calcul",
        "impôt . taux neutre d'impôt sur le revenu . barème Guadeloupe Réunion Martinique",
        "impôt . taux neutre d'impôt sur le revenu . barème Guyane Mayotte",
        "établissement . localisation . outre-mer . Guadeloupe Réunion Martinique",
        "établissement . localisation . département",
        "établissement . localisation",
        "impôt . taux neutre d'impôt sur le revenu",
        "impôt . revenu imposable",
        "dirigeant . rémunération . net . imposable",
        "dirigeant . assimilé salarié",
        "dirigeant . indépendant",
        "dirigeant . auto-entrepreneur . impôt . revenu imposable",
        "bénéficiaire . dividendes . imposables",
        "dirigeant . auto-entrepreneur . impôt . versement libératoire . montant",
      ],
      "unit": {
        "denominators": [
          "an",
        ],
        "numerators": [
          "€",
        ],
      },
    },
  ],
}
`;

exports[`e2e test mon-entreprise api > Test openapi.json endpoint 2`] = `
{
  "components": {
    "schemas": {
      "EvaluateBody": {
        "properties": {
          "expressions": {
            "$ref": "#/components/schemas/Expressions",
          },
          "situation": {
            "$ref": "#/components/schemas/Situation",
          },
        },
        "required": [
          "expressions",
        ],
        "type": "object",
      },
      "EvaluateResponse": {
        "description": "Schéma retourné par l'endpoint evaluate",
        "oneOf": [
          {
            "properties": {
              "evaluate": {
                "items": {
                  "anyOf": [
                    {
                      "properties": {
                        "missingVariables": {
                          "items": {
                            "type": "string",
                          },
                          "type": "array",
                        },
                        "nodeValue": {
                          "type": "number",
                        },
                        "traversedVariables": {
                          "items": {
                            "type": "string",
                          },
                          "type": "array",
                        },
                      },
                      "type": "object",
                    },
                    {
                      "properties": {
                        "error": {
                          "properties": {
                            "message": {
                              "type": "string",
                            },
                          },
                          "type": "object",
                        },
                      },
                      "type": "object",
                    },
                  ],
                },
                "type": "array",
              },
            },
            "type": "object",
          },
          {
            "properties": {
              "situationError": {
                "properties": {
                  "message": {
                    "type": "string",
                  },
                },
                "type": "object",
              },
            },
            "type": "object",
          },
        ],
      },
      "Expressions": {
        "description": "Une expression ou un tableau d'expressions Publicodes",
        "oneOf": [
          {
            "items": {
              "$ref": "#/components/schemas/PublicodesExpression",
            },
            "minItems": 1,
            "type": "array",
          },
          {
            "$ref": "#/components/schemas/PublicodesExpression",
          },
        ],
      },
      "InputValidationError": {
        "items": {
          "properties": {
            "dataPath": {
              "type": "string",
            },
            "keyword": {
              "type": "string",
            },
            "message": {
              "type": "string",
            },
            "params": {
              "additionalProperties": {
                "type": "string",
              },
              "type": "object",
            },
            "schemaPath": {
              "type": "string",
            },
          },
          "type": "object",
        },
        "type": "array",
      },
      "PublicodesExpression": {
        "description": "Une expression Publicodes",
        "oneOf": [
          {
            "type": "number",
          },
          {
            "type": "string",
          },
          {
            "additionalProperties": {},
            "minProperties": 1,
            "type": "object",
          },
        ],
      },
      "Rule": {
        "properties": {
          "nodeKind": {
            "type": "string",
          },
          "rawNode": {
            "additionalProperties": {
              "type": "object",
            },
            "properties": {
              "nom": {
                "type": "string",
              },
              "question": {
                "type": "string",
              },
            },
            "type": "object",
          },
          "replacements": {
            "items": {
              "type": "object",
            },
            "type": "array",
          },
          "suggestions": {
            "type": "object",
          },
          "title": {
            "type": "string",
          },
        },
        "type": "object",
      },
      "Rules": {
        "additionalProperties": {
          "$ref": "#/components/schemas/Rule",
        },
        "type": "object",
      },
      "Situation": {
        "additionalProperties": {
          "$ref": "#/components/schemas/PublicodesExpression",
        },
        "description": "La situation avec laquelle l'expression ou les expressions seront évaluées",
        "type": "object",
      },
    },
  },
  "info": {
    "description": "Cet API expose les règles Publicodes de [mon-entreprise](https://mon-entreprise.urssaf.fr/).

Pour plus d'informations, consultez [notre documentation](/d%C3%A9veloppeur/api).
",
    "title": "Mon-entreprise API",
    "version": "beta",
  },
  "openapi": "3.0.0",
  "paths": {
    "/evaluate": {
      "post": {
        "operationId": "evaluate",
        "requestBody": {
          "content": {
            "application/json": {
              "examples": {
                "MicroEntreprise": {
                  "value": {
                    "expressions": [
                      {
                        "unité": "€/an",
                        "valeur": "dirigeant . auto-entrepreneur . cotisations et contributions",
                      },
                      "dirigeant . rémunération . impôt",
                      "dirigeant . auto-entrepreneur . revenu net . après impôt",
                    ],
                    "situation": {
                      "dirigeant . auto-entrepreneur . chiffre d'affaires": "42000 €/an",
                      "dirigeant . auto-entrepreneur . impôt . versement libératoire": "non",
                      "entreprise . activité": "'libérale'",
                      "entreprise . activité . libérale . réglementée": "non",
                      "entreprise . catégorie juridique": "'EI'",
                      "entreprise . catégorie juridique . EI . auto-entrepreneur": "oui",
                      "impôt . méthode de calcul": "'taux neutre'",
                    },
                  },
                },
                "SalaireBrutEnNet": {
                  "value": {
                    "expressions": [
                      "salarié . rémunération . net à payer avant impôt",
                    ],
                    "situation": {
                      "salarié . contrat": "'CDI'",
                      "salarié . contrat . salaire brut": {
                        "unité": "€ / mois",
                        "valeur": 4200,
                      },
                    },
                  },
                },
              },
              "schema": {
                "$ref": "#/components/schemas/EvaluateBody",
              },
            },
          },
          "required": true,
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EvaluateResponse",
                },
              },
            },
            "description": "La requête a réussi",
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InputValidationError",
                },
              },
            },
            "description": "Erreur de validation d'entrée",
          },
        },
        "summary": "Evalue une expression avec un situation donnée",
        "tags": [
          "publicodes-api",
        ],
      },
    },
    "/rules": {
      "get": {
        "operationId": "rules",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Rules",
                },
              },
            },
            "description": "La requête a réussi",
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InputValidationError",
                },
              },
            },
            "description": "Erreur de validation d'entrée",
          },
        },
        "summary": "Retourne toutes les règles",
        "tags": [
          "publicodes-api",
        ],
      },
    },
    "/rules/{rule}": {
      "get": {
        "operationId": "rules-rule",
        "parameters": [
          {
            "description": "Rule to get",
            "examples": {
              "Impot": {
                "value": "impôt . méthode de calcul",
              },
              "SalaireNet": {
                "value": "salarié . rémunération . net à payer avant impôt",
              },
            },
            "in": "path",
            "name": "rule",
            "required": true,
            "schema": {
              "type": "string",
            },
          },
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/Rule",
                    },
                    {
                      "properties": {
                        "error": {
                          "properties": {
                            "message": {
                              "type": "string",
                            },
                          },
                          "type": "object",
                        },
                      },
                      "type": "object",
                    },
                  ],
                },
              },
            },
            "description": "La requête a réussi",
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InputValidationError",
                },
              },
            },
            "description": "Erreur de validation d'entrée",
          },
        },
        "summary": "Retourne la règle demandée",
        "tags": [
          "publicodes-api",
        ],
      },
    },
  },
  "servers": [
    {
      "url": "/api/v1/",
    },
  ],
}
`;
